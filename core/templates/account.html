{% extends "base.html" %}
{% load extras %}
{% load staticfiles %}
{% load crispy_forms_tags %}

{% block title %} Account - {{ ctf_name }} {% endblock %}

{% block pagetitle %}
<header class="page-title">
	<div class="container">
		<h1>{{ user.username }}'s Account</h1>
	</div>
</header>
{% endblock %}

{% block content %}
    <div class="row">
        <div class="col-xs-6">
            {% crispy change_password %}
        </div>

        <div class="col-xs-6">
            {% if user.profile.team %}
                <h3 style="margin-top: 0;">Team information</h3>

                <p>You're a member of team {{ user.profile.team.name }}.  Your team code is
                <samp style='color: blue;'>{{ user.profile.team.code }}</samp>.  Don't give it
                out to anyone you don't want joining your team.</p>

                <p>Your team has {{ user.profile.team.user_count }} out of 5 possible members:</p>
                <ul>
                    {% for team_member in user.profile.team.profiles.all %}
                        <li>{{ team_member.user.first_name }}&nbsp;{{ team_member.user.last_name }}
                        &nbsp;({{ team_member.user.username }})</li>
                    {% endfor %}
                </ul>

                <p>Your shell account username and default password are below:</p>
                Username: <samp style='color: blue;'>{{ user.profile.team.shell_username }}</samp><br>
                Password: <samp style='color: blue;'>{{ user.profile.team.shell_password }}</samp>
                <br><br><br>

                <h3 style="margin-top: 0;">Shipping address</h3>

                {% if not user.profile.team.address_street %}
                    <p>Nobody in your team has given us a shipping address yet. If you're eligible for prizes, make
                    sure to fill this out. Prizes are only awarded to US high school (or middle school) teams.</p>
                    {% crispy address_form %}
                {% else %}
                    <p>We've received the following information from you or one of your teammates. Should you need
                    to correct this information, email us at <a href="mailto:contact@angstromctf.com">contact@angstromctf.com</a>.</p>

                    <p>Shipping address:</p>

                    {{ user.profile.team.address_street }}<br/>
                    {% if user.profile.team.address_street_line_2 %}
                        {{ user.profile.team.address_street_line_2 }}<br/>
                    {% endif %}
                    {{ user.profile.team.address_city }}, {{ user.profile.team.address_state }} {{ user.profile.team.address_zip }}
                    <br/><br/>
                {% endif %}


            {% else %}
                {% crispy join_team %}
                {% crispy create_team %}
            {% endif %}
        </div>
    </div>

    <script type="text/javascript" src="{% static "js/csrf.js" %}"></script>
{% endblock %}
