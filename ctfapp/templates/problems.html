{% extends "base.html" %}

{% block title %}Problems - angstromCTF{% endblock %}

{% block pagetitle %}
<header class="page-title">
	<div class="container">
		<h1>Problems</h1>	
	</div>
</header>
{% endblock %}


{% block content %}

{% for problem in problem_list %}
	<div class="panel panel-danger">
		<div class="panel-heading" data-toggle="collapse" href="#wrapper{{ problem.id }}" aria-expanded="false" aria-controls="wrapper{{ problem.id }}">
			<h3 class="panel-title">
				{{ problem.problem_title }} ({{ problem.problem_category }}, {{ problem.problem_value }})
				<span style="float: right;">Unsolved</span>
			</h3>
		</div>
		
		<div class="collapse {% ifequal problem.id last %} in{% endifequal %}" id="wrapper{{ problem.id }}">
			<div class="panel-body">
				{{ problem.problem_text }}
				
				<br/>
				<br/>
				
				<form action="." method="post">
					{% csrf_token %}
					
					<div class="input-group">
						<input type="text" class="form-control" placeholder="Problem submission" id="id_flag_guess" name="flag_guess">
						<span class="input-group-btn">
							<button class="btn btn-primary" type="submit">Submit!</button>
						</span>
						<input id="id_problem" name="problem" type="hidden" value="{{ problem.id }}"></input>
					</div>
				</form>
				
				{% ifequal problem.id last %}
					<br/>
					{% if good %}
						<div class="alert alert-success .alert-dismissible" role="alert">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<span class="glyphicon glyphicon-check" aria-hidden="true"></span>
							<strong>Correct!</strong> Nice job!
						</div>
					{% else %}
						<div class="alert alert-danger .alert-dismissible" role="alert">
							<button type="button" class="close" data-dismiss="alert" aria-label="Close"><span aria-hidden="true">&times;</span></button>
							<span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span>
							<strong>Incorrect.</strong> Sorry, please try again.
						</div>
					{% endif %}
				{% endifequal %}
			</div>
		</div>
	</div>
{% endfor %}

{% endblock %}
